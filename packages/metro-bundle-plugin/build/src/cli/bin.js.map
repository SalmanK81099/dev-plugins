{"version":3,"file":"bin.js","sourceRoot":"","sources":["../../../src/cli/bin.ts"],"names":[],"mappings":";;;;;;AAEA,8CAAwB;AACxB,wDAAoE;AAEpE,oDAA8B;AAC9B,4DAAsC;AACtC,kDAA4B;AAE5B,OAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,YAAY,CAAC;AAEpC,IAAM,UAAU,GAAG,cAAI,CAAC,OAAO,CAAC,SAAS,EAAE,gBAAgB,CAAC,CAAA;AAC5D,IAAM,gBAAgB,GAAG,cAAI,CAAC,IAAI,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;AAC9D,IAAM,gBAAgB,GAAG,cAAI,CAAC,IAAI,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;AAE9D,IAAM,GAAG,GAAG,IAAA,iBAAO,GAAE,CAAC;AAEtB,GAAG,CAAC,GAAG,CAAC,IAAA,qBAAW,GAAE,CAAC,CAAC;AAEvB,wGAAwG;AACxG,GAAG,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;AAE5B,GAAG,CAAC,GAAG,CACL,iBAAO,CAAC,MAAM,CAAC,gBAAgB,EAAE;IAC/B,MAAM,EAAE,IAAI;IACZ,UAAU,EAAE,CAAC,MAAM,CAAC;CACrB,CAAC,CACH,CAAC;AAEF,GAAG,CAAC,GAAG,CAAC,IAAA,gBAAM,EAAC,MAAM,CAAC,CAAC,CAAC;AAExB,GAAG,CAAC,GAAG,CACL,GAAG,EACH,IAAA,8BAAoB,EAAC;IACnB,KAAK,EAAE,gBAAgB;CACxB,CAAC,CACH,CAAC;AACF,IAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC;AAEtC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE;IACf,OAAO,CAAC,GAAG,CAAC,2CAAoC,IAAI,CAAE,CAAC,CAAC;AAC1D,CAAC,CAAC,CAAC","sourcesContent":["#!/usr/bin/env node\n\nimport path from 'path';\nimport { createRequestHandler } from '@expo/server/adapter/express';\n\nimport express from 'express';\nimport compression from 'compression';\nimport morgan from 'morgan';\n\nprocess.env.NODE_ENV = 'production';\n\nconst WEBUI_ROOT = path.resolve(__dirname, '../../../webui')\nconst CLIENT_BUILD_DIR = path.join(WEBUI_ROOT, 'dist/client');\nconst SERVER_BUILD_DIR = path.join(WEBUI_ROOT, 'dist/server');\n\nconst app = express();\n\napp.use(compression());\n\n// http://expressjs.com/en/advanced/best-practice-security.html#at-a-minimum-disable-x-powered-by-header\napp.disable('x-powered-by');\n\napp.use(\n  express.static(CLIENT_BUILD_DIR, {\n    maxAge: '1h',\n    extensions: ['html'],\n  })\n);\n\napp.use(morgan('tiny'));\n\napp.all(\n  '*',\n  createRequestHandler({\n    build: SERVER_BUILD_DIR,\n  })\n);\nconst port = process.env.PORT || 3000;\n\napp.listen(port, () => {\n  console.log(`Express server listening on port ${port}`);\n});\n"]}